{
  "_format": "hh-sol-artifact-1",
  "contractName": "PositionVault",
  "sourceName": "contracts/position/PositionVault.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_funding",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_key",
          "type": "bytes32"
        }
      ],
      "name": "deleteOpenPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "funding",
      "outputs": [
        {
          "internalType": "contract Funding",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_key",
          "type": "bytes32"
        }
      ],
      "name": "getPosition",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            },
            {
              "internalType": "int256",
              "name": "unrealizedPnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "size",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "margin",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "avgOpenPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "lastUpdatedTime",
              "type": "uint256"
            },
            {
              "internalType": "int256",
              "name": "avgEntryFundingIndex",
              "type": "int256"
            }
          ],
          "internalType": "struct OpenPosition",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_key",
          "type": "bytes32"
        }
      ],
      "name": "getPositionSize",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "maxLongCapacity",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "maxShortCapacity",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "openPositions",
      "outputs": [
        {
          "internalType": "address",
          "name": "trader",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        },
        {
          "internalType": "int256",
          "name": "unrealizedPnl",
          "type": "int256"
        },
        {
          "internalType": "uint256",
          "name": "currentPositionRecordId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "size",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "margin",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "avgOpenPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastUpdatedTime",
          "type": "uint256"
        },
        {
          "internalType": "int256",
          "name": "avgEntryFundingIndex",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_tokenCount",
          "type": "uint256"
        }
      ],
      "name": "setMaxLongCapacity",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_tokenCount",
          "type": "uint256"
        }
      ],
      "name": "setMaxShortCapacity",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "enum OrderExecType",
              "name": "_execType",
              "type": "uint8"
            },
            {
              "internalType": "bytes32",
              "name": "_key",
              "type": "bytes32"
            },
            {
              "internalType": "bool",
              "name": "_isOpening",
              "type": "bool"
            },
            {
              "internalType": "address",
              "name": "_trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "_isLong",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "_currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_executionPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_sizeDeltaAbs",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_marginDeltaAbs",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "_isIncreaseInSize",
              "type": "bool"
            },
            {
              "internalType": "bool",
              "name": "_isIncreaseInMargin",
              "type": "bool"
            }
          ],
          "internalType": "struct UpdatePositionParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "updateOpenPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b506040516109a43803806109a483398101604081905261002f91610054565b600080546001600160a01b0319166001600160a01b0392909216919091179055610084565b60006020828403121561006657600080fd5b81516001600160a01b038116811461007d57600080fd5b9392505050565b610911806100936000396000f3fe608060405234801561001057600080fd5b506004361061009e5760003560e01c8063b8b3577f11610066578063b8b3577f14610235578063be20bbec14610255578063cb4c86b714610275578063d9b34d0e146102a0578063f12562f4146102b357600080fd5b80631928b3cb146100a357806336841616146100cc57806356cdd60f146101835780639941a0b2146101a5578063b503a55414610207575b600080fd5b6100b66100b136600461068e565b6102d6565b6040516100c391906106a7565b60405180910390f35b61012f6100da36600461068e565b60016020819052600091825260409091208054918101546002820154600383015460048401546005850154600686015460078701546008909701546001600160a01b03891698600160a01b900460ff1697908a565b604080516001600160a01b03909b168b5298151560208b0152978901969096526060880194909452608087019290925260a086015260c085015260e0840152610100830152610120820152610140016100c3565b6101a3610191366004610727565b60009182526003602052604090912055565b005b6101a36101b336600461068e565b6000908152600160208190526040822080546001600160a81b031916815590810182905560028101829055600381018290556004810182905560058101829055600681018290556007810182905560080155565b61022761021536600461068e565b60036020526000908152604090205481565b6040519081526020016100c3565b6101a3610243366004610727565b60009182526002602052604090912055565b61022761026336600461068e565b60026020526000908152604090205481565b600054610288906001600160a01b031681565b6040516001600160a01b0390911681526020016100c3565b6101a36102ae3660046107bc565b6103c9565b6102276102c136600461068e565b60009081526001602052604090206004015490565b61033760405180610140016040528060006001600160a01b0316815260200160001515815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b5060009081526001602081815260409283902083516101408101855281546001600160a01b0381168252600160a01b900460ff1615159281019290925291820154928101929092526002810154606083015260038101546080830152600481015460a0830152600581015460c0830152600681015460e083015260078101546101008301526008015461012082015290565b602080820151600090815260019091526040908190209082015115610436576060820151815460808401511515600160a01b026001600160a81b03199091166001600160a01b039092169190911717815560a0820151600282015560c08201516003820155600060088201555b600082610100015111801561044d57508161014001515b1561060857600480820154600683015461010085015160e086015160405163c901b33d60e01b81529485019390935260248401919091526044830152606482015273__$91a1a7f12f728c8759f4be979bae55555f$__9063c901b33d90608401602060405180830381865af41580156104ca573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104ee9190610880565b6006820155600480820154600883015461010085015160005460c087015160405163fe7c3f7160e01b81529586015273__$91a1a7f12f728c8759f4be979bae55555f$__9463d5f1543d949392916001600160a01b03169063fe7c3f7190602401602060405180830381865afa15801561056c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105909190610880565b6040516001600160e01b031960e087901b1681526004810194909452602484019290925260448301526064820152608401602060405180830381865af41580156105de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106029190610880565b60088201555b81610140015161062c57816101000151816004015461062791906108af565b610641565b816101000151816004015461064191906108c8565b600482015561016082015161066a57816101200151816005015461066591906108af565b61067f565b816101200151816005015461067f91906108c8565b60058201554260079091015550565b6000602082840312156106a057600080fd5b5035919050565b81516001600160a01b03168152610140810160208301516106cc602084018215159052565b5060408301516040830152606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525092915050565b6000806040838503121561073a57600080fd5b50508035926020909101359150565b604051610180810167ffffffffffffffff8111828210171561077b57634e487b7160e01b600052604160045260246000fd5b60405290565b80356004811061079057600080fd5b919050565b8035801515811461079057600080fd5b80356001600160a01b038116811461079057600080fd5b600061018082840312156107cf57600080fd5b6107d7610749565b6107e083610781565b8152602083013560208201526107f860408401610795565b6040820152610809606084016107a5565b606082015261081a60808401610795565b608082015260a083013560a082015260c083013560c082015260e083013560e0820152610100808401358183015250610120808401358183015250610140610863818501610795565b90820152610160610875848201610795565b908201529392505050565b60006020828403121561089257600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156108c2576108c2610899565b92915050565b808201808211156108c2576108c261089956fea2646970667358221220ccc2cc76984dad6e97e12e2d4bfa7fbe23c8d765c3a1bd825e1b0c581a2085bf64736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061009e5760003560e01c8063b8b3577f11610066578063b8b3577f14610235578063be20bbec14610255578063cb4c86b714610275578063d9b34d0e146102a0578063f12562f4146102b357600080fd5b80631928b3cb146100a357806336841616146100cc57806356cdd60f146101835780639941a0b2146101a5578063b503a55414610207575b600080fd5b6100b66100b136600461068e565b6102d6565b6040516100c391906106a7565b60405180910390f35b61012f6100da36600461068e565b60016020819052600091825260409091208054918101546002820154600383015460048401546005850154600686015460078701546008909701546001600160a01b03891698600160a01b900460ff1697908a565b604080516001600160a01b03909b168b5298151560208b0152978901969096526060880194909452608087019290925260a086015260c085015260e0840152610100830152610120820152610140016100c3565b6101a3610191366004610727565b60009182526003602052604090912055565b005b6101a36101b336600461068e565b6000908152600160208190526040822080546001600160a81b031916815590810182905560028101829055600381018290556004810182905560058101829055600681018290556007810182905560080155565b61022761021536600461068e565b60036020526000908152604090205481565b6040519081526020016100c3565b6101a3610243366004610727565b60009182526002602052604090912055565b61022761026336600461068e565b60026020526000908152604090205481565b600054610288906001600160a01b031681565b6040516001600160a01b0390911681526020016100c3565b6101a36102ae3660046107bc565b6103c9565b6102276102c136600461068e565b60009081526001602052604090206004015490565b61033760405180610140016040528060006001600160a01b0316815260200160001515815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b5060009081526001602081815260409283902083516101408101855281546001600160a01b0381168252600160a01b900460ff1615159281019290925291820154928101929092526002810154606083015260038101546080830152600481015460a0830152600581015460c0830152600681015460e083015260078101546101008301526008015461012082015290565b602080820151600090815260019091526040908190209082015115610436576060820151815460808401511515600160a01b026001600160a81b03199091166001600160a01b039092169190911717815560a0820151600282015560c08201516003820155600060088201555b600082610100015111801561044d57508161014001515b1561060857600480820154600683015461010085015160e086015160405163c901b33d60e01b81529485019390935260248401919091526044830152606482015273__$91a1a7f12f728c8759f4be979bae55555f$__9063c901b33d90608401602060405180830381865af41580156104ca573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104ee9190610880565b6006820155600480820154600883015461010085015160005460c087015160405163fe7c3f7160e01b81529586015273__$91a1a7f12f728c8759f4be979bae55555f$__9463d5f1543d949392916001600160a01b03169063fe7c3f7190602401602060405180830381865afa15801561056c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105909190610880565b6040516001600160e01b031960e087901b1681526004810194909452602484019290925260448301526064820152608401602060405180830381865af41580156105de573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106029190610880565b60088201555b81610140015161062c57816101000151816004015461062791906108af565b610641565b816101000151816004015461064191906108c8565b600482015561016082015161066a57816101200151816005015461066591906108af565b61067f565b816101200151816005015461067f91906108c8565b60058201554260079091015550565b6000602082840312156106a057600080fd5b5035919050565b81516001600160a01b03168152610140810160208301516106cc602084018215159052565b5060408301516040830152606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525092915050565b6000806040838503121561073a57600080fd5b50508035926020909101359150565b604051610180810167ffffffffffffffff8111828210171561077b57634e487b7160e01b600052604160045260246000fd5b60405290565b80356004811061079057600080fd5b919050565b8035801515811461079057600080fd5b80356001600160a01b038116811461079057600080fd5b600061018082840312156107cf57600080fd5b6107d7610749565b6107e083610781565b8152602083013560208201526107f860408401610795565b6040820152610809606084016107a5565b606082015261081a60808401610795565b608082015260a083013560a082015260c083013560c082015260e083013560e0820152610100808401358183015250610120808401358183015250610140610863818501610795565b90820152610160610875848201610795565b908201529392505050565b60006020828403121561089257600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156108c2576108c2610899565b92915050565b808201808211156108c2576108c261089956fea2646970667358221220ccc2cc76984dad6e97e12e2d4bfa7fbe23c8d765c3a1bd825e1b0c581a2085bf64736f6c63430008120033",
  "linkReferences": {
    "contracts/position/PositionUtils.sol": {
      "PositionUtils": [
        {
          "length": 20,
          "start": 1315
        },
        {
          "length": 20,
          "start": 1458
        }
      ]
    }
  },
  "deployedLinkReferences": {
    "contracts/position/PositionUtils.sol": {
      "PositionUtils": [
        {
          "length": 20,
          "start": 1168
        },
        {
          "length": 20,
          "start": 1311
        }
      ]
    }
  }
}
