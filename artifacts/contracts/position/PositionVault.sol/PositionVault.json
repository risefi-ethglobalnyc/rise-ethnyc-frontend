{
  "_format": "hh-sol-artifact-1",
  "contractName": "PositionVault",
  "sourceName": "contracts/position/PositionVault.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_key",
          "type": "bytes32"
        }
      ],
      "name": "deleteOpenPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_key",
          "type": "bytes32"
        }
      ],
      "name": "getPosition",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            },
            {
              "internalType": "int256",
              "name": "unrealizedPnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "size",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "margin",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "avgOpenPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "lastUpdatedTime",
              "type": "uint256"
            },
            {
              "internalType": "int256",
              "name": "avgEntryFundingIndex",
              "type": "int256"
            }
          ],
          "internalType": "struct OpenPosition",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "_key",
          "type": "bytes32"
        }
      ],
      "name": "getPositionSize",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "maxLongCapacity",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "maxShortCapacity",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "openPositions",
      "outputs": [
        {
          "internalType": "address",
          "name": "trader",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "isLong",
          "type": "bool"
        },
        {
          "internalType": "int256",
          "name": "unrealizedPnl",
          "type": "int256"
        },
        {
          "internalType": "uint256",
          "name": "currentPositionRecordId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "size",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "margin",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "avgOpenPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "lastUpdatedTime",
          "type": "uint256"
        },
        {
          "internalType": "int256",
          "name": "avgEntryFundingIndex",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_tokenCount",
          "type": "uint256"
        }
      ],
      "name": "setMaxLongCapacity",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_tokenCount",
          "type": "uint256"
        }
      ],
      "name": "setMaxShortCapacity",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "enum OrderExecType",
              "name": "_execType",
              "type": "uint8"
            },
            {
              "internalType": "bytes32",
              "name": "_key",
              "type": "bytes32"
            },
            {
              "internalType": "bool",
              "name": "_isOpening",
              "type": "bool"
            },
            {
              "internalType": "address",
              "name": "_trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "_isLong",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "_currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_executionPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_sizeDeltaAbs",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_marginDeltaAbs",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "_isIncreaseInSize",
              "type": "bool"
            },
            {
              "internalType": "bool",
              "name": "_isIncreaseInMargin",
              "type": "bool"
            }
          ],
          "internalType": "struct UpdatePositionParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "updateOpenPosition",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b506107b5806100206000396000f3fe608060405234801561001057600080fd5b50600436106100835760003560e01c80631928b3cb1461008857806336841616146100b157806356cdd60f146101675780639941a0b214610189578063b503a554146101ea578063b8b3577f14610218578063be20bbec14610238578063d9b34d0e14610258578063f12562f41461026b575b600080fd5b61009b610096366004610532565b61028e565b6040516100a8919061054b565b60405180910390f35b6101136100bf366004610532565b6000602081905290815260409020805460018201546002830154600384015460048501546005860154600687015460078801546008909801546001600160a01b03881698600160a01b90980460ff1697908a565b604080516001600160a01b03909b168b5298151560208b0152978901969096526060880194909452608087019290925260a086015260c085015260e0840152610100830152610120820152610140016100a8565b6101876101753660046105cb565b60009182526002602052604090912055565b005b610187610197366004610532565b600090815260208190526040812080546001600160a81b03191681556001810182905560028101829055600381018290556004810182905560058101829055600681018290556007810182905560080155565b61020a6101f8366004610532565b60026020526000908152604090205481565b6040519081526020016100a8565b6101876102263660046105cb565b60009182526001602052604090912055565b61020a610246366004610532565b60016020526000908152604090205481565b610187610266366004610660565b610382565b61020a610279366004610532565b60009081526020819052604090206004015490565b6102ef60405180610140016040528060006001600160a01b0316815260200160001515815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b506000908152602081815260409182902082516101408101845281546001600160a01b0381168252600160a01b900460ff161515928101929092526001810154928201929092526002820154606082015260038201546080820152600482015460a0820152600582015460c0820152600682015460e0820152600782015461010082015260089091015461012082015290565b60208082015160009081529081905260409081902090820151156103ee576060820151815460808401511515600160a01b026001600160a81b03199091166001600160a01b039092169190911717815560a0820151600282015560c08201516003820155600060088201555b600082610100015111801561040557508161014001515b156104ac57600480820154600683015461010085015160e086015160405163c901b33d60e01b81529485019390935260248401919091526044830152606482015273__$91a1a7f12f728c8759f4be979bae55555f$__9063c901b33d90608401602060405180830381865af4158015610482573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104a69190610724565b60068201555b8161014001516104d05781610100015181600401546104cb9190610753565b6104e5565b81610100015181600401546104e5919061076c565b600482015561016082015161050e5781610120015181600501546105099190610753565b610523565b8161012001518160050154610523919061076c565b60058201554260079091015550565b60006020828403121561054457600080fd5b5035919050565b81516001600160a01b0316815261014081016020830151610570602084018215159052565b5060408301516040830152606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525092915050565b600080604083850312156105de57600080fd5b50508035926020909101359150565b604051610180810167ffffffffffffffff8111828210171561061f57634e487b7160e01b600052604160045260246000fd5b60405290565b80356004811061063457600080fd5b919050565b8035801515811461063457600080fd5b80356001600160a01b038116811461063457600080fd5b6000610180828403121561067357600080fd5b61067b6105ed565b61068483610625565b81526020830135602082015261069c60408401610639565b60408201526106ad60608401610649565b60608201526106be60808401610639565b608082015260a083013560a082015260c083013560c082015260e083013560e0820152610100808401358183015250610120808401358183015250610140610707818501610639565b90820152610160610719848201610639565b908201529392505050565b60006020828403121561073657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156107665761076661073d565b92915050565b808201808211156107665761076661073d56fea26469706673582212202a2d947fe9e6f5770f6fd53812535490a4fd9e29a66dd19a2391c43e0f51edd464736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100835760003560e01c80631928b3cb1461008857806336841616146100b157806356cdd60f146101675780639941a0b214610189578063b503a554146101ea578063b8b3577f14610218578063be20bbec14610238578063d9b34d0e14610258578063f12562f41461026b575b600080fd5b61009b610096366004610532565b61028e565b6040516100a8919061054b565b60405180910390f35b6101136100bf366004610532565b6000602081905290815260409020805460018201546002830154600384015460048501546005860154600687015460078801546008909801546001600160a01b03881698600160a01b90980460ff1697908a565b604080516001600160a01b03909b168b5298151560208b0152978901969096526060880194909452608087019290925260a086015260c085015260e0840152610100830152610120820152610140016100a8565b6101876101753660046105cb565b60009182526002602052604090912055565b005b610187610197366004610532565b600090815260208190526040812080546001600160a81b03191681556001810182905560028101829055600381018290556004810182905560058101829055600681018290556007810182905560080155565b61020a6101f8366004610532565b60026020526000908152604090205481565b6040519081526020016100a8565b6101876102263660046105cb565b60009182526001602052604090912055565b61020a610246366004610532565b60016020526000908152604090205481565b610187610266366004610660565b610382565b61020a610279366004610532565b60009081526020819052604090206004015490565b6102ef60405180610140016040528060006001600160a01b0316815260200160001515815260200160008152602001600081526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b506000908152602081815260409182902082516101408101845281546001600160a01b0381168252600160a01b900460ff161515928101929092526001810154928201929092526002820154606082015260038201546080820152600482015460a0820152600582015460c0820152600682015460e0820152600782015461010082015260089091015461012082015290565b60208082015160009081529081905260409081902090820151156103ee576060820151815460808401511515600160a01b026001600160a81b03199091166001600160a01b039092169190911717815560a0820151600282015560c08201516003820155600060088201555b600082610100015111801561040557508161014001515b156104ac57600480820154600683015461010085015160e086015160405163c901b33d60e01b81529485019390935260248401919091526044830152606482015273__$91a1a7f12f728c8759f4be979bae55555f$__9063c901b33d90608401602060405180830381865af4158015610482573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104a69190610724565b60068201555b8161014001516104d05781610100015181600401546104cb9190610753565b6104e5565b81610100015181600401546104e5919061076c565b600482015561016082015161050e5781610120015181600501546105099190610753565b610523565b8161012001518160050154610523919061076c565b60058201554260079091015550565b60006020828403121561054457600080fd5b5035919050565b81516001600160a01b0316815261014081016020830151610570602084018215159052565b5060408301516040830152606083015160608301526080830151608083015260a083015160a083015260c083015160c083015260e083015160e083015261010080840151818401525061012080840151818401525092915050565b600080604083850312156105de57600080fd5b50508035926020909101359150565b604051610180810167ffffffffffffffff8111828210171561061f57634e487b7160e01b600052604160045260246000fd5b60405290565b80356004811061063457600080fd5b919050565b8035801515811461063457600080fd5b80356001600160a01b038116811461063457600080fd5b6000610180828403121561067357600080fd5b61067b6105ed565b61068483610625565b81526020830135602082015261069c60408401610639565b60408201526106ad60608401610649565b60608201526106be60808401610639565b608082015260a083013560a082015260c083013560c082015260e083013560e0820152610100808401358183015250610120808401358183015250610140610707818501610639565b90820152610160610719848201610639565b908201529392505050565b60006020828403121561073657600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156107665761076661073d565b92915050565b808201808211156107665761076661073d56fea26469706673582212202a2d947fe9e6f5770f6fd53812535490a4fd9e29a66dd19a2391c43e0f51edd464736f6c63430008120033",
  "linkReferences": {
    "contracts/position/PositionUtils.sol": {
      "PositionUtils": [
        {
          "length": 20,
          "start": 1128
        }
      ]
    }
  },
  "deployedLinkReferences": {
    "contracts/position/PositionUtils.sol": {
      "PositionUtils": [
        {
          "length": 20,
          "start": 1096
        }
      ]
    }
  }
}
