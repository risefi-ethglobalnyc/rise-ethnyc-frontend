{
  "_format": "hh-sol-artifact-1",
  "contractName": "PnlManager",
  "sourceName": "contracts/position/PnlManager.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_traderVault",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_risePool",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "market",
      "outputs": [
        {
          "internalType": "contract Market",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "risePool",
      "outputs": [
        {
          "internalType": "contract RisePool",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            },
            {
              "internalType": "int256",
              "name": "unrealizedPnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "size",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "margin",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "avgOpenPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "lastUpdatedTime",
              "type": "uint256"
            },
            {
              "internalType": "int256",
              "name": "avgEntryFundingIndex",
              "type": "int256"
            }
          ],
          "internalType": "struct OpenPosition",
          "name": "_position",
          "type": "tuple"
        },
        {
          "internalType": "bool",
          "name": "_isLong",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "_executionPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_sizeAbs",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_marginAbs",
          "type": "uint256"
        }
      ],
      "name": "settlePnL",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "traderVault",
      "outputs": [
        {
          "internalType": "contract TraderVault",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b506040516107ff3803806107ff83398101604081905261002f9161008d565b600080546001600160a01b039485166001600160a01b0319918216179091556001805493851693821693909317909255600280549190931691161790556100d0565b80516001600160a01b038116811461008857600080fd5b919050565b6000806000606084860312156100a257600080fd5b6100ab84610071565b92506100b960208501610071565b91506100c760408501610071565b90509250925092565b610720806100df6000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c806351ed0ee3146100515780637411e99f1461008157806380f5560514610094578063c8a8da06146100a7575b600080fd5b600054610064906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b600154610064906001600160a01b031681565b600254610064906001600160a01b031681565b6100ba6100b536600461051e565b6100c8565b604051908152602001610078565b600254604051633ec7919360e01b81526004810185905260009182916001600160a01b0390911690633ec791939060240161012060405180830381865afa158015610117573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061013b9190610608565b60e0890151604051632d43eefb60e01b815260048101879052602481019190915260448101889052881515606482015290915060009073__$e8652f61bc11c22d415b40de743c60e742$__90632d43eefb90608401602060405180830381865af41580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610686565b6000548a5160c085015160405163df486d1f60e01b81529394506001600160a01b039092169263df486d1f9261020c9291899060040161069f565b600060405180830381600087803b15801561022657600080fd5b505af115801561023a573d6000803e3d6000fd5b50505050876102ad5760015460405163010b911f60e71b815260048101889052602481018790526001600160a01b03909116906385c88f8090604401600060405180830381600087803b15801561029057600080fd5b505af11580156102a4573d6000803e3d6000fd5b50505050610313565b60015460405163b4faf0d360e01b815260048101889052602481018790526001600160a01b039091169063b4faf0d390604401600060405180830381600087803b1580156102fa57600080fd5b505af115801561030e573d6000803e3d6000fd5b505050505b600081121561039f57600054895160c08401516001600160a01b0390921691630b665acb919061034a610345866106c0565b610422565b6040518463ffffffff1660e01b81526004016103689392919061069f565b600060405180830381600087803b15801561038257600080fd5b505af1158015610396573d6000803e3d6000fd5b50505050610416565b600054895160c08401516001600160a01b039092169163df486d1f91906103c585610422565b6040518463ffffffff1660e01b81526004016103e39392919061069f565b600060405180830381600087803b1580156103fd57600080fd5b505af1158015610411573d6000803e3d6000fd5b505050505b98975050505050505050565b6000808212156104785760405162461bcd60e51b815260206004820181905260248201527f53616665436173743a2076616c7565206d75737420626520706f736974697665604482015260640160405180910390fd5b5090565b604051610140810167ffffffffffffffff811182821017156104ae57634e487b7160e01b600052604160045260246000fd5b60405290565b604051610120810167ffffffffffffffff811182821017156104ae57634e487b7160e01b600052604160045260246000fd5b6001600160a01b03811681146104fb57600080fd5b50565b8035610509816104e6565b919050565b8035801515811461050957600080fd5b6000806000806000808688036101e081121561053957600080fd5b6101408082121561054957600080fd5b61055161047c565b915061055c896104fe565b825261056a60208a0161050e565b602083015260408901356040830152606089013560608301526080890135608083015260a089013560a083015260c089013560c083015260e089013560e0830152610100808a01358184015250610120808a013581840152508197506105d1818a0161050e565b979a97995050505061016086013595610180810135956101a082013595506101c0909101359350915050565b8051610509816104e6565b6000610120828403121561061b57600080fd5b6106236104b4565b825181526020830151602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e082015261010061067b8185016105fd565b908201529392505050565b60006020828403121561069857600080fd5b5051919050565b6001600160a01b039390931683526020830191909152604082015260600190565b6000600160ff1b82016106e357634e487b7160e01b600052601160045260246000fd5b506000039056fea2646970667358221220c2df021b3511dd14fa1d5ab8b4c904822ae6df51b06ab2cad9de92636046b13d64736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061004c5760003560e01c806351ed0ee3146100515780637411e99f1461008157806380f5560514610094578063c8a8da06146100a7575b600080fd5b600054610064906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b600154610064906001600160a01b031681565b600254610064906001600160a01b031681565b6100ba6100b536600461051e565b6100c8565b604051908152602001610078565b600254604051633ec7919360e01b81526004810185905260009182916001600160a01b0390911690633ec791939060240161012060405180830381865afa158015610117573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061013b9190610608565b60e0890151604051632d43eefb60e01b815260048101879052602481019190915260448101889052881515606482015290915060009073__$e8652f61bc11c22d415b40de743c60e742$__90632d43eefb90608401602060405180830381865af41580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610686565b6000548a5160c085015160405163df486d1f60e01b81529394506001600160a01b039092169263df486d1f9261020c9291899060040161069f565b600060405180830381600087803b15801561022657600080fd5b505af115801561023a573d6000803e3d6000fd5b50505050876102ad5760015460405163010b911f60e71b815260048101889052602481018790526001600160a01b03909116906385c88f8090604401600060405180830381600087803b15801561029057600080fd5b505af11580156102a4573d6000803e3d6000fd5b50505050610313565b60015460405163b4faf0d360e01b815260048101889052602481018790526001600160a01b039091169063b4faf0d390604401600060405180830381600087803b1580156102fa57600080fd5b505af115801561030e573d6000803e3d6000fd5b505050505b600081121561039f57600054895160c08401516001600160a01b0390921691630b665acb919061034a610345866106c0565b610422565b6040518463ffffffff1660e01b81526004016103689392919061069f565b600060405180830381600087803b15801561038257600080fd5b505af1158015610396573d6000803e3d6000fd5b50505050610416565b600054895160c08401516001600160a01b039092169163df486d1f91906103c585610422565b6040518463ffffffff1660e01b81526004016103e39392919061069f565b600060405180830381600087803b1580156103fd57600080fd5b505af1158015610411573d6000803e3d6000fd5b505050505b98975050505050505050565b6000808212156104785760405162461bcd60e51b815260206004820181905260248201527f53616665436173743a2076616c7565206d75737420626520706f736974697665604482015260640160405180910390fd5b5090565b604051610140810167ffffffffffffffff811182821017156104ae57634e487b7160e01b600052604160045260246000fd5b60405290565b604051610120810167ffffffffffffffff811182821017156104ae57634e487b7160e01b600052604160045260246000fd5b6001600160a01b03811681146104fb57600080fd5b50565b8035610509816104e6565b919050565b8035801515811461050957600080fd5b6000806000806000808688036101e081121561053957600080fd5b6101408082121561054957600080fd5b61055161047c565b915061055c896104fe565b825261056a60208a0161050e565b602083015260408901356040830152606089013560608301526080890135608083015260a089013560a083015260c089013560c083015260e089013560e0830152610100808a01358184015250610120808a013581840152508197506105d1818a0161050e565b979a97995050505061016086013595610180810135956101a082013595506101c0909101359350915050565b8051610509816104e6565b6000610120828403121561061b57600080fd5b6106236104b4565b825181526020830151602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e082015261010061067b8185016105fd565b908201529392505050565b60006020828403121561069857600080fd5b5051919050565b6001600160a01b039390931683526020830191909152604082015260600190565b6000600160ff1b82016106e357634e487b7160e01b600052601160045260246000fd5b506000039056fea2646970667358221220c2df021b3511dd14fa1d5ab8b4c904822ae6df51b06ab2cad9de92636046b13d64736f6c63430008120033",
  "linkReferences": {
    "contracts/position/PnlUtils.sol": {
      "PnlUtils": [
        {
          "length": 20,
          "start": 594
        }
      ]
    }
  },
  "deployedLinkReferences": {
    "contracts/position/PnlUtils.sol": {
      "PnlUtils": [
        {
          "length": 20,
          "start": 371
        }
      ]
    }
  }
}
