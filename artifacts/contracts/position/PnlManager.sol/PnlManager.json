{
  "_format": "hh-sol-artifact-1",
  "contractName": "PnlManager",
  "sourceName": "contracts/position/PnlManager.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_traderVault",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_risePool",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_funding",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "funding",
      "outputs": [
        {
          "internalType": "contract Funding",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "market",
      "outputs": [
        {
          "internalType": "contract Market",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "risePool",
      "outputs": [
        {
          "internalType": "contract RisePool",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            },
            {
              "internalType": "int256",
              "name": "unrealizedPnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "size",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "margin",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "avgOpenPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "lastUpdatedTime",
              "type": "uint256"
            },
            {
              "internalType": "int256",
              "name": "avgEntryFundingIndex",
              "type": "int256"
            }
          ],
          "internalType": "struct OpenPosition",
          "name": "_position",
          "type": "tuple"
        },
        {
          "internalType": "bool",
          "name": "_isLong",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "_executionPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_sizeAbs",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_marginAbs",
          "type": "uint256"
        }
      ],
      "name": "settlePnL",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "traderVault",
      "outputs": [
        {
          "internalType": "contract TraderVault",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b5060405161088038038061088083398101604081905261002f9161009e565b600080546001600160a01b039586166001600160a01b03199182161790915560018054948616948216949094179093556002805492851692841692909217909155600380549190931691161790556100f2565b80516001600160a01b038116811461009957600080fd5b919050565b600080600080608085870312156100b457600080fd5b6100bd85610082565b93506100cb60208601610082565b92506100d960408601610082565b91506100e760608601610082565b905092959194509250565b61077f806101016000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c806351ed0ee31461005c5780637411e99f1461008c57806380f556051461009f578063c8a8da06146100b2578063cb4c86b7146100d3575b600080fd5b60005461006f906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b60015461006f906001600160a01b031681565b60035461006f906001600160a01b031681565b6100c56100c036600461054e565b6100e6565b604051908152602001610083565b60025461006f906001600160a01b031681565b600354604051633ec7919360e01b81526004810185905260009182916001600160a01b0390911690633ec791939060240161012060405180830381865afa158015610135573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101599190610638565b60e0890151604051632d43eefb60e01b8152600481018790526024810191909152604481018890528815156064820152909150600090819073__$e8652f61bc11c22d415b40de743c60e742$__90632d43eefb90608401602060405180830381865af41580156101cd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f191906106b6565b6000548b5160c086015160405163df486d1f60e01b81529394506001600160a01b039092169263df486d1f9261022c92918a906004016106cf565b600060405180830381600087803b15801561024657600080fd5b505af115801561025a573d6000803e3d6000fd5b50505050886102cd5760015460405163010b911f60e71b815260048101899052602481018890526001600160a01b03909116906385c88f8090604401600060405180830381600087803b1580156102b057600080fd5b505af11580156102c4573d6000803e3d6000fd5b50505050610333565b60015460405163b4faf0d360e01b815260048101899052602481018890526001600160a01b039091169063b4faf0d390604401600060405180830381600087803b15801561031a57600080fd5b505af115801561032e573d6000803e3d6000fd5b505050505b600061033f8383610706565b905060008112156103cd576000548b5160c08601516001600160a01b0390921691630b665acb91906103786103738661072d565b610452565b6040518463ffffffff1660e01b8152600401610396939291906106cf565b600060405180830381600087803b1580156103b057600080fd5b505af11580156103c4573d6000803e3d6000fd5b50505050610444565b6000548b5160c08601516001600160a01b039092169163df486d1f91906103f385610452565b6040518463ffffffff1660e01b8152600401610411939291906106cf565b600060405180830381600087803b15801561042b57600080fd5b505af115801561043f573d6000803e3d6000fd5b505050505b9a9950505050505050505050565b6000808212156104a85760405162461bcd60e51b815260206004820181905260248201527f53616665436173743a2076616c7565206d75737420626520706f736974697665604482015260640160405180910390fd5b5090565b604051610140810167ffffffffffffffff811182821017156104de57634e487b7160e01b600052604160045260246000fd5b60405290565b604051610120810167ffffffffffffffff811182821017156104de57634e487b7160e01b600052604160045260246000fd5b6001600160a01b038116811461052b57600080fd5b50565b803561053981610516565b919050565b8035801515811461053957600080fd5b6000806000806000808688036101e081121561056957600080fd5b6101408082121561057957600080fd5b6105816104ac565b915061058c8961052e565b825261059a60208a0161053e565b602083015260408901356040830152606089013560608301526080890135608083015260a089013560a083015260c089013560c083015260e089013560e0830152610100808a01358184015250610120808a01358184015250819750610601818a0161053e565b979a97995050505061016086013595610180810135956101a082013595506101c0909101359350915050565b805161053981610516565b6000610120828403121561064b57600080fd5b6106536104e4565b825181526020830151602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101006106ab81850161062d565b908201529392505050565b6000602082840312156106c857600080fd5b5051919050565b6001600160a01b039390931683526020830191909152604082015260600190565b634e487b7160e01b600052601160045260246000fd5b8181036000831280158383131683831282161715610726576107266106f0565b5092915050565b6000600160ff1b8201610742576107426106f0565b506000039056fea26469706673582212201f669166f9e9fc64876d0230c450b5a1e9801d24ee067b5a2ca6886de79a148764736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100575760003560e01c806351ed0ee31461005c5780637411e99f1461008c57806380f556051461009f578063c8a8da06146100b2578063cb4c86b7146100d3575b600080fd5b60005461006f906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b60015461006f906001600160a01b031681565b60035461006f906001600160a01b031681565b6100c56100c036600461054e565b6100e6565b604051908152602001610083565b60025461006f906001600160a01b031681565b600354604051633ec7919360e01b81526004810185905260009182916001600160a01b0390911690633ec791939060240161012060405180830381865afa158015610135573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101599190610638565b60e0890151604051632d43eefb60e01b8152600481018790526024810191909152604481018890528815156064820152909150600090819073__$e8652f61bc11c22d415b40de743c60e742$__90632d43eefb90608401602060405180830381865af41580156101cd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101f191906106b6565b6000548b5160c086015160405163df486d1f60e01b81529394506001600160a01b039092169263df486d1f9261022c92918a906004016106cf565b600060405180830381600087803b15801561024657600080fd5b505af115801561025a573d6000803e3d6000fd5b50505050886102cd5760015460405163010b911f60e71b815260048101899052602481018890526001600160a01b03909116906385c88f8090604401600060405180830381600087803b1580156102b057600080fd5b505af11580156102c4573d6000803e3d6000fd5b50505050610333565b60015460405163b4faf0d360e01b815260048101899052602481018890526001600160a01b039091169063b4faf0d390604401600060405180830381600087803b15801561031a57600080fd5b505af115801561032e573d6000803e3d6000fd5b505050505b600061033f8383610706565b905060008112156103cd576000548b5160c08601516001600160a01b0390921691630b665acb91906103786103738661072d565b610452565b6040518463ffffffff1660e01b8152600401610396939291906106cf565b600060405180830381600087803b1580156103b057600080fd5b505af11580156103c4573d6000803e3d6000fd5b50505050610444565b6000548b5160c08601516001600160a01b039092169163df486d1f91906103f385610452565b6040518463ffffffff1660e01b8152600401610411939291906106cf565b600060405180830381600087803b15801561042b57600080fd5b505af115801561043f573d6000803e3d6000fd5b505050505b9a9950505050505050505050565b6000808212156104a85760405162461bcd60e51b815260206004820181905260248201527f53616665436173743a2076616c7565206d75737420626520706f736974697665604482015260640160405180910390fd5b5090565b604051610140810167ffffffffffffffff811182821017156104de57634e487b7160e01b600052604160045260246000fd5b60405290565b604051610120810167ffffffffffffffff811182821017156104de57634e487b7160e01b600052604160045260246000fd5b6001600160a01b038116811461052b57600080fd5b50565b803561053981610516565b919050565b8035801515811461053957600080fd5b6000806000806000808688036101e081121561056957600080fd5b6101408082121561057957600080fd5b6105816104ac565b915061058c8961052e565b825261059a60208a0161053e565b602083015260408901356040830152606089013560608301526080890135608083015260a089013560a083015260c089013560c083015260e089013560e0830152610100808a01358184015250610120808a01358184015250819750610601818a0161053e565b979a97995050505061016086013595610180810135956101a082013595506101c0909101359350915050565b805161053981610516565b6000610120828403121561064b57600080fd5b6106536104e4565b825181526020830151602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101006106ab81850161062d565b908201529392505050565b6000602082840312156106c857600080fd5b5051919050565b6001600160a01b039390931683526020830191909152604082015260600190565b634e487b7160e01b600052601160045260246000fd5b8181036000831280158383131683831282161715610726576107266106f0565b5092915050565b6000600160ff1b8201610742576107426106f0565b506000039056fea26469706673582212201f669166f9e9fc64876d0230c450b5a1e9801d24ee067b5a2ca6886de79a148764736f6c63430008120033",
  "linkReferences": {
    "contracts/position/PnlUtils.sol": {
      "PnlUtils": [
        {
          "length": 20,
          "start": 660
        }
      ]
    }
  },
  "deployedLinkReferences": {
    "contracts/position/PnlUtils.sol": {
      "PnlUtils": [
        {
          "length": 20,
          "start": 403
        }
      ]
    }
  }
}
