{
  "_format": "hh-sol-artifact-1",
  "contractName": "PositionHistory",
  "sourceName": "contracts/position/PositionHistory.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_positionVault",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_traderVault",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "_trader",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "_positionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "int256",
              "name": "_pnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "_sizeAbs",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_avgExecPrice",
              "type": "uint256"
            }
          ],
          "internalType": "struct ClosePositionRecordParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "closePositionRecord",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "_trader",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "_marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_maxSize",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_avgOpenPrice",
              "type": "uint256"
            }
          ],
          "internalType": "struct OpenPositionRecordParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "openPositionRecord",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "positionRecords",
      "outputs": [
        {
          "internalType": "bool",
          "name": "isClosed",
          "type": "bool"
        },
        {
          "internalType": "int256",
          "name": "cumulativeRealizedPnl",
          "type": "int256"
        },
        {
          "internalType": "uint256",
          "name": "cumulativeClosedSize",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "marketId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxSize",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "avgOpenPrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "avgClosePrice",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "openTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "closeTimestamp",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "positionVault",
      "outputs": [
        {
          "internalType": "contract PositionVault",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "traderVault",
      "outputs": [
        {
          "internalType": "contract TraderVault",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "_trader",
              "type": "address"
            },
            {
              "internalType": "bytes32",
              "name": "_key",
              "type": "bytes32"
            },
            {
              "internalType": "uint256",
              "name": "_positionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "_isIncrease",
              "type": "bool"
            },
            {
              "internalType": "int256",
              "name": "_pnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "_sizeAbs",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_avgExecPrice",
              "type": "uint256"
            }
          ],
          "internalType": "struct UpdatePositionRecordParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "updatePositionRecord",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50604051610a35380380610a3583398101604081905261002f9161007c565b600080546001600160a01b039384166001600160a01b031991821617909155600180549290931691161790556100af565b80516001600160a01b038116811461007757600080fd5b919050565b6000806040838503121561008f57600080fd5b61009883610060565b91506100a660208401610060565b90509250929050565b610977806100be6000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806315af5e8f146100675780632ba595c61461007c57806346b1ca9f1461008f57806351ed0ee31461013f5780637ee96c361461016a57806398654aff1461018b575b600080fd5b61007a610075366004610654565b61019e565b005b61007a61008a3660046106f6565b6102ec565b6100f461009d36600461077d565b6002602081815260009384526040808520909152918352912080546001820154928201546003830154600484015460058501546006860154600787015460089097015460ff90961697969495939492939192909189565b604080519915158a5260208a0198909852968801959095526060870193909352608086019190915260a085015260c084015260e0830152610100820152610120015b60405180910390f35b600154610152906001600160a01b031681565b6040516001600160a01b039091168152602001610136565b61017d6101783660046107a9565b610359565b604051908152602001610136565b600054610152906001600160a01b031681565b80516001600160a01b03908116600090815260026020908152604080832081860151845282528083208354928601519151631928b3cb60e01b81526004810192909252939190911690631928b3cb9060240161014060405180830381865afa15801561020e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610232919061083c565b825490915060ff16156102855760405162461bcd60e51b8152602060048201526017602482015276141bdcda5d1a5bdb88185b1c9958591e4818db1bdcd959604a1b604482015260640160405180910390fd5b81600401548160a0015111156102a05760a081015160048301555b8260600151156102b85760e001516005919091015550565b6102cb828460a001518560c00151610512565b6102d9828460a001516105b5565b6102e78284608001516105d2565b505050565b80516001600160a01b03166000908152600260209081526040808320828501518452909152902060608201516080830151610328918391610512565b6103368183606001516105b5565b6103448183604001516105d2565b805460ff191660011781554260089091015550565b600154815160405163096e25af60e31b81526001600160a01b03918216600482015260009283921690634b712d7890602401602060405180830381865afa1580156103a8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103cc91906108d1565b6040805161012081018252600080825260208083018281528385018381528983015160608087019182528b88015160808801908152908c015160a0880190815260c088018781524260e08a019081526101008a018981528f516001600160a01b039081168b526002808b528d8c208f8d52909a529b90992099518a5460ff1916901515178a5595516001808b019190915594519689019690965591516003880155516004870155516005860155915160068501555160078401559051600890920191909155805486519394509091169163dedc5492916104ad908590610900565b6040516001600160e01b031960e085901b1681526001600160a01b0390921660048301526024820152604401600060405180830381600087803b1580156104f357600080fd5b505af1158015610507573d6000803e3d6000fd5b509295945050505050565b6002830154600684015460405163c901b33d60e01b815260048101929092526024820152604481018390526064810182905260009073__$91a1a7f12f728c8759f4be979bae55555f$__9063c901b33d90608401602060405180830381865af4158015610583573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a791906108d1565b600690940193909355505050565b808260020160008282546105c99190610900565b90915550505050565b808260010160008282546105c99190610919565b604051610140810167ffffffffffffffff8111828210171561061857634e487b7160e01b600052604160045260246000fd5b60405290565b6001600160a01b038116811461063357600080fd5b50565b801515811461063357600080fd5b803561064f81610636565b919050565b600060e0828403121561066657600080fd5b60405160e0810181811067ffffffffffffffff8211171561069757634e487b7160e01b600052604160045260246000fd5b60405282356106a58161061e565b8082525060208301356020820152604083013560408201526106c960608401610644565b60608201526080830135608082015260a083013560a082015260c083013560c08201528091505092915050565b600060a0828403121561070857600080fd5b60405160a0810181811067ffffffffffffffff8211171561073957634e487b7160e01b600052604160045260246000fd5b60405282356107478161061e565b80825250602083013560208201526040830135604082015260608301356060820152608083013560808201528091505092915050565b6000806040838503121561079057600080fd5b823561079b8161061e565b946020939093013593505050565b6000608082840312156107bb57600080fd5b6040516080810181811067ffffffffffffffff821117156107ec57634e487b7160e01b600052604160045260246000fd5b60405282356107fa8161061e565b808252506020830135602082015260408301356040820152606083013560608201528091505092915050565b805161064f8161061e565b805161064f81610636565b6000610140828403121561084f57600080fd5b6108576105e6565b61086083610826565b815261086e60208401610831565b602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101208084015181830152508091505092915050565b6000602082840312156108e357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610913576109136108ea565b92915050565b8082018281126000831280158216821582161715610939576109396108ea565b50509291505056fea2646970667358221220e910aaab5de236e85bca838ccdd3b727b079238e0f8a4177d261a6da6f1f120b64736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100625760003560e01c806315af5e8f146100675780632ba595c61461007c57806346b1ca9f1461008f57806351ed0ee31461013f5780637ee96c361461016a57806398654aff1461018b575b600080fd5b61007a610075366004610654565b61019e565b005b61007a61008a3660046106f6565b6102ec565b6100f461009d36600461077d565b6002602081815260009384526040808520909152918352912080546001820154928201546003830154600484015460058501546006860154600787015460089097015460ff90961697969495939492939192909189565b604080519915158a5260208a0198909852968801959095526060870193909352608086019190915260a085015260c084015260e0830152610100820152610120015b60405180910390f35b600154610152906001600160a01b031681565b6040516001600160a01b039091168152602001610136565b61017d6101783660046107a9565b610359565b604051908152602001610136565b600054610152906001600160a01b031681565b80516001600160a01b03908116600090815260026020908152604080832081860151845282528083208354928601519151631928b3cb60e01b81526004810192909252939190911690631928b3cb9060240161014060405180830381865afa15801561020e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610232919061083c565b825490915060ff16156102855760405162461bcd60e51b8152602060048201526017602482015276141bdcda5d1a5bdb88185b1c9958591e4818db1bdcd959604a1b604482015260640160405180910390fd5b81600401548160a0015111156102a05760a081015160048301555b8260600151156102b85760e001516005919091015550565b6102cb828460a001518560c00151610512565b6102d9828460a001516105b5565b6102e78284608001516105d2565b505050565b80516001600160a01b03166000908152600260209081526040808320828501518452909152902060608201516080830151610328918391610512565b6103368183606001516105b5565b6103448183604001516105d2565b805460ff191660011781554260089091015550565b600154815160405163096e25af60e31b81526001600160a01b03918216600482015260009283921690634b712d7890602401602060405180830381865afa1580156103a8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103cc91906108d1565b6040805161012081018252600080825260208083018281528385018381528983015160608087019182528b88015160808801908152908c015160a0880190815260c088018781524260e08a019081526101008a018981528f516001600160a01b039081168b526002808b528d8c208f8d52909a529b90992099518a5460ff1916901515178a5595516001808b019190915594519689019690965591516003880155516004870155516005860155915160068501555160078401559051600890920191909155805486519394509091169163dedc5492916104ad908590610900565b6040516001600160e01b031960e085901b1681526001600160a01b0390921660048301526024820152604401600060405180830381600087803b1580156104f357600080fd5b505af1158015610507573d6000803e3d6000fd5b509295945050505050565b6002830154600684015460405163c901b33d60e01b815260048101929092526024820152604481018390526064810182905260009073__$91a1a7f12f728c8759f4be979bae55555f$__9063c901b33d90608401602060405180830381865af4158015610583573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a791906108d1565b600690940193909355505050565b808260020160008282546105c99190610900565b90915550505050565b808260010160008282546105c99190610919565b604051610140810167ffffffffffffffff8111828210171561061857634e487b7160e01b600052604160045260246000fd5b60405290565b6001600160a01b038116811461063357600080fd5b50565b801515811461063357600080fd5b803561064f81610636565b919050565b600060e0828403121561066657600080fd5b60405160e0810181811067ffffffffffffffff8211171561069757634e487b7160e01b600052604160045260246000fd5b60405282356106a58161061e565b8082525060208301356020820152604083013560408201526106c960608401610644565b60608201526080830135608082015260a083013560a082015260c083013560c08201528091505092915050565b600060a0828403121561070857600080fd5b60405160a0810181811067ffffffffffffffff8211171561073957634e487b7160e01b600052604160045260246000fd5b60405282356107478161061e565b80825250602083013560208201526040830135604082015260608301356060820152608083013560808201528091505092915050565b6000806040838503121561079057600080fd5b823561079b8161061e565b946020939093013593505050565b6000608082840312156107bb57600080fd5b6040516080810181811067ffffffffffffffff821117156107ec57634e487b7160e01b600052604160045260246000fd5b60405282356107fa8161061e565b808252506020830135602082015260408301356040820152606083013560608201528091505092915050565b805161064f8161061e565b805161064f81610636565b6000610140828403121561084f57600080fd5b6108576105e6565b61086083610826565b815261086e60208401610831565b602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101008084015181830152506101208084015181830152508091505092915050565b6000602082840312156108e357600080fd5b5051919050565b634e487b7160e01b600052601160045260246000fd5b80820180821115610913576109136108ea565b92915050565b8082018281126000831280158216821582161715610939576109396108ea565b50509291505056fea2646970667358221220e910aaab5de236e85bca838ccdd3b727b079238e0f8a4177d261a6da6f1f120b64736f6c63430008120033",
  "linkReferences": {
    "contracts/position/PositionUtils.sol": {
      "PositionUtils": [
        {
          "length": 20,
          "start": 1543
        }
      ]
    }
  },
  "deployedLinkReferences": {
    "contracts/position/PositionUtils.sol": {
      "PositionUtils": [
        {
          "length": 20,
          "start": 1353
        }
      ]
    }
  }
}
