{
  "_format": "hh-sol-artifact-1",
  "contractName": "L2MarginGateway",
  "sourceName": "contracts/crosschain/L2MarginGateway.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_inbox",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_l2Vault",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_tokenInfo",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        }
      ],
      "name": "NotBridge",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_recipient",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_token",
          "type": "address"
        }
      ],
      "name": "_withdrawERC20FromOutbox",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_recipient",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_amount",
          "type": "uint256"
        }
      ],
      "name": "_withdrawEthFromOutbox",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "allowedBridgesMap",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "index",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "allowed",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_token",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_depositAmount",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "_maxSubmissionCost",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_gasLimit",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_gasPriceBid",
              "type": "uint256"
            }
          ],
          "internalType": "struct L2ToL3FeeParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "depositERC20ToL3",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_depositAmount",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "_maxSubmissionCost",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_gasLimit",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_gasPriceBid",
              "type": "uint256"
            }
          ],
          "internalType": "struct L2ToL3FeeParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "depositEthToL3",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "inbox",
      "outputs": [
        {
          "internalType": "contract IInbox",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_l3GatewayAddress",
          "type": "address"
        }
      ],
      "name": "initialize",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "l2Vault",
      "outputs": [
        {
          "internalType": "contract L2Vault",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "l3GatewayAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_allowedBridge",
          "type": "address"
        }
      ],
      "name": "setAllowedBridge",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "tokenInfo",
      "outputs": [
        {
          "internalType": "contract TokenInfo",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_assetId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_withdrawAmount",
          "type": "uint256"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "_maxSubmissionCost",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_gasLimit",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "_gasPriceBid",
              "type": "uint256"
            }
          ],
          "internalType": "struct L2ToL3FeeParams",
          "name": "p",
          "type": "tuple"
        }
      ],
      "name": "triggerWithdrawalFromL2",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "payable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50604051610f47380380610f4783398101604081905261002f9161008d565b600380546001600160a01b039485166001600160a01b0319918216179091556002805493851693821693909317909255600180549190931691161790556100d0565b80516001600160a01b038116811461008857600080fd5b919050565b6000806000606084860312156100a257600080fd5b6100ab84610071565b92506100b960208501610071565b91506100c760408501610071565b90509250925092565b610e68806100df6000396000f3fe6080604052600436106100a75760003560e01c8063adf2aeac11610064578063adf2aeac14610167578063c4d66de814610187578063d6470f0a146101a7578063e74c3312146101f3578063ef0d4fbe14610213578063fb0e722b1461023357600080fd5b8063118a4343146100ac57806334834020146100d25780636addb663146100ff5780636b3073a51461011f5780638da19ede146101415780639fd467af14610154575b600080fd5b6100bf6100ba366004610b56565b610253565b6040519081526020015b60405180910390f35b3480156100de57600080fd5b506002546100f2906001600160a01b031681565b6040516100c99190610b93565b34801561010b57600080fd5b506001546100f2906001600160a01b031681565b34801561012b57600080fd5b5061013f61013a366004610ba7565b6104ee565b005b6100bf61014f366004610bc9565b61057d565b6100bf610162366004610bf6565b610749565b34801561017357600080fd5b5061013f610182366004610c23565b61085b565b34801561019357600080fd5b5061013f6101a2366004610ba7565b610903565b3480156101b357600080fd5b506101de6101c2366004610ba7565b6004602052600090815260409020805460019091015460ff1682565b604080519283529015156020830152016100c9565b3480156101ff57600080fd5b506000546100f2906001600160a01b031681565b34801561021f57600080fd5b5061013f61022e366004610c56565b61097e565b34801561023f57600080fd5b506003546100f2906001600160a01b031681565b600080831161027d5760405162461bcd60e51b815260040161027490610c80565b60405180910390fd5b816040015182602001516102919190610ce2565b825161029d9190610cf9565b3410156102bc5760405162461bcd60e51b815260040161027490610d0c565b600254604051636b2fc86560e11b81523360048201526001600160a01b038681166024830152604482018690529091169063d65f90ca90606401600060405180830381600087803b15801561031057600080fd5b505af1158015610324573d6000803e3d6000fd5b5050600154604051631563a52760e31b8152600093506001600160a01b03909116915063ab1d29389061035b908890600401610b93565b602060405180830381865afa158015610378573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039c9190610d4d565b9050600063df486d1f60e01b3383876040516024016103bd93929190610d66565b60408051601f19818403018152918152602080830180516001600160e01b03166001600160e01b03199095169490941790935260035490870151928701519193506000926001600160a01b039091169163679b6ded9161041c91610ce2565b87516104289190610cf9565b60008054895160208b01516040808d015190516001600160e01b031960e089901b16815261046c956001600160a01b03909516949392339283928d90600401610d87565b60206040518083038185885af115801561048a573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906104af9190610d4d565b90506104e433866040015187602001516104c99190610ce2565b87516104d59190610cf9565b6104df9034610e1f565b610a1c565b9695505050505050565b6001600160a01b038116600090815260046020526040902054156105545760405162461bcd60e51b815260206004820152601a60248201527f4c32476174657761793a20616c726561647920616c6c6f7765640000000000006044820152606401610274565b6001600160a01b031660009081526004602052604090206001908101805460ff19169091179055565b600080831161059e5760405162461bcd60e51b815260040161027490610c80565b816040015182602001516105b29190610ce2565b82516105be9085610cf9565b6105c89190610cf9565b3410156105e75760405162461bcd60e51b815260040161027490610d0c565b6002546105fd906001600160a01b031684610a1c565b600063df486d1f60e01b3360018660405160240161061d93929190610d66565b60408051601f19818403018152918152602080830180516001600160e01b03166001600160e01b03199095169490941790935260035490860151928601519193506000926001600160a01b039091169163679b6ded9161067c91610ce2565b86516106889190610cf9565b60008054885160208a01516040808c015190516001600160e01b031960e089901b1681526106cc956001600160a01b03909516949392339283928d90600401610d87565b60206040518083038185885af11580156106ea573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019061070f9190610d4d565b905061073f33856040015186602001516107299190610ce2565b86516107359089610cf9565b6104d59190610cf9565b9150505b92915050565b600080631f71514b60e01b33868660405160240161076993929190610d66565b60408051601f19818403018152918152602080830180516001600160e01b03166001600160e01b03199095169490941790935260035490860151928601519193506000926001600160a01b039091169163679b6ded916107c891610ce2565b86516107d49190610cf9565b60008054885160208a01516040808c015190516001600160e01b031960e089901b168152610818956001600160a01b03909516949392339283928d90600401610d87565b60206040518083038185885af1158015610836573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906104e49190610d4d565b3360009081526004602052604090206001015460ff166108905733604051637c8da0cf60e11b81526004016102749190610b93565b600254604051636180f9a760e11b81526001600160a01b0383811660048301526024820185905285811660448301529091169063c301f34e90606401600060405180830381600087803b1580156108e657600080fd5b505af11580156108fa573d6000803e3d6000fd5b50505050505050565b6000546001600160a01b03161561095c5760405162461bcd60e51b815260206004820152601e60248201527f4c32476174657761793a20616c726561647920696e697469616c697a656400006044820152606401610274565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b3360009081526004602052604090206001015460ff166109b35733604051637c8da0cf60e11b81526004016102749190610b93565b600254604051626ef9d760e41b81526001600160a01b03848116600483015260248201849052909116906306ef9d7090604401600060405180830381600087803b158015610a0057600080fd5b505af1158015610a14573d6000803e3d6000fd5b505050505050565b6000826001600160a01b03168260405160006040518083038185875af1925050503d8060008114610a69576040519150601f19603f3d011682016040523d82523d6000602084013e610a6e565b606091505b5050905080610acb5760405162461bcd60e51b815260206004820152602360248201527f5472616e7366657248656c7065723a20455448207472616e73666572206661696044820152621b195960ea1b6064820152608401610274565b505050565b80356001600160a01b0381168114610ae757600080fd5b919050565b600060608284031215610afe57600080fd5b6040516060810181811067ffffffffffffffff82111715610b2f57634e487b7160e01b600052604160045260246000fd5b80604052508091508235815260208301356020820152604083013560408201525092915050565b600080600060a08486031215610b6b57600080fd5b610b7484610ad0565b925060208401359150610b8a8560408601610aec565b90509250925092565b6001600160a01b0391909116815260200190565b600060208284031215610bb957600080fd5b610bc282610ad0565b9392505050565b60008060808385031215610bdc57600080fd5b82359150610bed8460208501610aec565b90509250929050565b600080600060a08486031215610c0b57600080fd5b8335925060208401359150610b8a8560408601610aec565b600080600060608486031215610c3857600080fd5b610c4184610ad0565b925060208401359150610b8a60408501610ad0565b60008060408385031215610c6957600080fd5b610c7283610ad0565b946020939093013593505050565b6020808252602c908201527f4c32476174657761793a206465706f73697420616d6f756e742073686f756c6460408201526b20626520706f73697469766560a01b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b808202811582820484141761074357610743610ccc565b8082018082111561074357610743610ccc565b60208082526021908201527f4c32476174657761793a20696e73756666696369656e74206d73672e76616c756040820152606560f81b606082015260800190565b600060208284031215610d5f57600080fd5b5051919050565b6001600160a01b039390931683526020830191909152604082015260600190565b600061010060018060a01b03808c16845260208b818601528a6040860152818a16606086015281891660808601528760a08601528660c08601528260e0860152855191508183860152600092505b81831015610df457858301810151858401610120015291820191610dd5565b506101209150600082828601015281601f19601f830116850101925050509998505050505050505050565b8181038181111561074357610743610ccc56fea264697066735822122057cd05c08fba87bfc07cd55d1efafdb31ceb1847d331834782aafece0e5a35ef64736f6c63430008120033",
  "deployedBytecode": "0x6080604052600436106100a75760003560e01c8063adf2aeac11610064578063adf2aeac14610167578063c4d66de814610187578063d6470f0a146101a7578063e74c3312146101f3578063ef0d4fbe14610213578063fb0e722b1461023357600080fd5b8063118a4343146100ac57806334834020146100d25780636addb663146100ff5780636b3073a51461011f5780638da19ede146101415780639fd467af14610154575b600080fd5b6100bf6100ba366004610b56565b610253565b6040519081526020015b60405180910390f35b3480156100de57600080fd5b506002546100f2906001600160a01b031681565b6040516100c99190610b93565b34801561010b57600080fd5b506001546100f2906001600160a01b031681565b34801561012b57600080fd5b5061013f61013a366004610ba7565b6104ee565b005b6100bf61014f366004610bc9565b61057d565b6100bf610162366004610bf6565b610749565b34801561017357600080fd5b5061013f610182366004610c23565b61085b565b34801561019357600080fd5b5061013f6101a2366004610ba7565b610903565b3480156101b357600080fd5b506101de6101c2366004610ba7565b6004602052600090815260409020805460019091015460ff1682565b604080519283529015156020830152016100c9565b3480156101ff57600080fd5b506000546100f2906001600160a01b031681565b34801561021f57600080fd5b5061013f61022e366004610c56565b61097e565b34801561023f57600080fd5b506003546100f2906001600160a01b031681565b600080831161027d5760405162461bcd60e51b815260040161027490610c80565b60405180910390fd5b816040015182602001516102919190610ce2565b825161029d9190610cf9565b3410156102bc5760405162461bcd60e51b815260040161027490610d0c565b600254604051636b2fc86560e11b81523360048201526001600160a01b038681166024830152604482018690529091169063d65f90ca90606401600060405180830381600087803b15801561031057600080fd5b505af1158015610324573d6000803e3d6000fd5b5050600154604051631563a52760e31b8152600093506001600160a01b03909116915063ab1d29389061035b908890600401610b93565b602060405180830381865afa158015610378573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039c9190610d4d565b9050600063df486d1f60e01b3383876040516024016103bd93929190610d66565b60408051601f19818403018152918152602080830180516001600160e01b03166001600160e01b03199095169490941790935260035490870151928701519193506000926001600160a01b039091169163679b6ded9161041c91610ce2565b87516104289190610cf9565b60008054895160208b01516040808d015190516001600160e01b031960e089901b16815261046c956001600160a01b03909516949392339283928d90600401610d87565b60206040518083038185885af115801561048a573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906104af9190610d4d565b90506104e433866040015187602001516104c99190610ce2565b87516104d59190610cf9565b6104df9034610e1f565b610a1c565b9695505050505050565b6001600160a01b038116600090815260046020526040902054156105545760405162461bcd60e51b815260206004820152601a60248201527f4c32476174657761793a20616c726561647920616c6c6f7765640000000000006044820152606401610274565b6001600160a01b031660009081526004602052604090206001908101805460ff19169091179055565b600080831161059e5760405162461bcd60e51b815260040161027490610c80565b816040015182602001516105b29190610ce2565b82516105be9085610cf9565b6105c89190610cf9565b3410156105e75760405162461bcd60e51b815260040161027490610d0c565b6002546105fd906001600160a01b031684610a1c565b600063df486d1f60e01b3360018660405160240161061d93929190610d66565b60408051601f19818403018152918152602080830180516001600160e01b03166001600160e01b03199095169490941790935260035490860151928601519193506000926001600160a01b039091169163679b6ded9161067c91610ce2565b86516106889190610cf9565b60008054885160208a01516040808c015190516001600160e01b031960e089901b1681526106cc956001600160a01b03909516949392339283928d90600401610d87565b60206040518083038185885af11580156106ea573d6000803e3d6000fd5b50505050506040513d601f19601f8201168201806040525081019061070f9190610d4d565b905061073f33856040015186602001516107299190610ce2565b86516107359089610cf9565b6104d59190610cf9565b9150505b92915050565b600080631f71514b60e01b33868660405160240161076993929190610d66565b60408051601f19818403018152918152602080830180516001600160e01b03166001600160e01b03199095169490941790935260035490860151928601519193506000926001600160a01b039091169163679b6ded916107c891610ce2565b86516107d49190610cf9565b60008054885160208a01516040808c015190516001600160e01b031960e089901b168152610818956001600160a01b03909516949392339283928d90600401610d87565b60206040518083038185885af1158015610836573d6000803e3d6000fd5b50505050506040513d601f19601f820116820180604052508101906104e49190610d4d565b3360009081526004602052604090206001015460ff166108905733604051637c8da0cf60e11b81526004016102749190610b93565b600254604051636180f9a760e11b81526001600160a01b0383811660048301526024820185905285811660448301529091169063c301f34e90606401600060405180830381600087803b1580156108e657600080fd5b505af11580156108fa573d6000803e3d6000fd5b50505050505050565b6000546001600160a01b03161561095c5760405162461bcd60e51b815260206004820152601e60248201527f4c32476174657761793a20616c726561647920696e697469616c697a656400006044820152606401610274565b600080546001600160a01b0319166001600160a01b0392909216919091179055565b3360009081526004602052604090206001015460ff166109b35733604051637c8da0cf60e11b81526004016102749190610b93565b600254604051626ef9d760e41b81526001600160a01b03848116600483015260248201849052909116906306ef9d7090604401600060405180830381600087803b158015610a0057600080fd5b505af1158015610a14573d6000803e3d6000fd5b505050505050565b6000826001600160a01b03168260405160006040518083038185875af1925050503d8060008114610a69576040519150601f19603f3d011682016040523d82523d6000602084013e610a6e565b606091505b5050905080610acb5760405162461bcd60e51b815260206004820152602360248201527f5472616e7366657248656c7065723a20455448207472616e73666572206661696044820152621b195960ea1b6064820152608401610274565b505050565b80356001600160a01b0381168114610ae757600080fd5b919050565b600060608284031215610afe57600080fd5b6040516060810181811067ffffffffffffffff82111715610b2f57634e487b7160e01b600052604160045260246000fd5b80604052508091508235815260208301356020820152604083013560408201525092915050565b600080600060a08486031215610b6b57600080fd5b610b7484610ad0565b925060208401359150610b8a8560408601610aec565b90509250925092565b6001600160a01b0391909116815260200190565b600060208284031215610bb957600080fd5b610bc282610ad0565b9392505050565b60008060808385031215610bdc57600080fd5b82359150610bed8460208501610aec565b90509250929050565b600080600060a08486031215610c0b57600080fd5b8335925060208401359150610b8a8560408601610aec565b600080600060608486031215610c3857600080fd5b610c4184610ad0565b925060208401359150610b8a60408501610ad0565b60008060408385031215610c6957600080fd5b610c7283610ad0565b946020939093013593505050565b6020808252602c908201527f4c32476174657761793a206465706f73697420616d6f756e742073686f756c6460408201526b20626520706f73697469766560a01b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b808202811582820484141761074357610743610ccc565b8082018082111561074357610743610ccc565b60208082526021908201527f4c32476174657761793a20696e73756666696369656e74206d73672e76616c756040820152606560f81b606082015260800190565b600060208284031215610d5f57600080fd5b5051919050565b6001600160a01b039390931683526020830191909152604082015260600190565b600061010060018060a01b03808c16845260208b818601528a6040860152818a16606086015281891660808601528760a08601528660c08601528260e0860152855191508183860152600092505b81831015610df457858301810151858401610120015291820191610dd5565b506101209150600082828601015281601f19601f830116850101925050509998505050505050505050565b8181038181111561074357610743610ccc56fea264697066735822122057cd05c08fba87bfc07cd55d1efafdb31ceb1847d331834782aafece0e5a35ef64736f6c63430008120033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
