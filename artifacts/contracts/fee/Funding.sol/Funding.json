{
  "_format": "hh-sol-artifact-1",
  "contractName": "Funding",
  "sourceName": "contracts/fee/Funding.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_priceFetcher",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_globalState",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_tokenInfo",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_market",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "FUNDING_INDEX_PRECISION",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "FUNDING_RATE_MULTIPLIER_PRECISION",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "FUNDING_RATE_PRECISION",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "PRICE_BUFFER_RATE_PRECISION",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "_getFundingRatePerHour",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "_getFundingRatePerSecond",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "_initializeFundingForMarket",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "fundingRateDamperPerHour",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "fundingRateDamperPerSecond",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "trader",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isLong",
              "type": "bool"
            },
            {
              "internalType": "int256",
              "name": "unrealizedPnl",
              "type": "int256"
            },
            {
              "internalType": "uint256",
              "name": "currentPositionRecordId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "marketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "size",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "margin",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "avgOpenPrice",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "lastUpdatedTime",
              "type": "uint256"
            },
            {
              "internalType": "int256",
              "name": "avgEntryFundingIndex",
              "type": "int256"
            }
          ],
          "internalType": "struct OpenPosition",
          "name": "_position",
          "type": "tuple"
        }
      ],
      "name": "getFundingFeeToPay",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "getFundingIndex",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "globalState",
      "outputs": [
        {
          "internalType": "contract GlobalState",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "interestRatePerHour",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "interestRatePerSecond",
      "outputs": [
        {
          "internalType": "int256",
          "name": "",
          "type": "int256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "market",
      "outputs": [
        {
          "internalType": "contract Market",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "priceFetcher",
      "outputs": [
        {
          "internalType": "contract PriceFetcher",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "tokenInfo",
      "outputs": [
        {
          "internalType": "contract TokenInfo",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "updateFundingIndex",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50604051610c27380380610c2783398101604081905261002f9161009e565b600080546001600160a01b039586166001600160a01b03199182161790915560018054948616948216949094179093556002805492851692841692909217909155600380549190931691161790556100f2565b80516001600160a01b038116811461009957600080fd5b919050565b600080600080608085870312156100b457600080fd5b6100bd85610082565b93506100cb60208601610082565b92506100d960408601610082565b91506100e760608601610082565b905092959194509250565b610b26806101016000396000f3fe608060405234801561001057600080fd5b50600436106100f65760003560e01c80639cc820da116100925780639cc820da146101d3578063af55f45c14610193578063b29123e9146101db578063bb57703d146101e7578063e6088a7a146101ef578063e76c01e4146101f7578063f5545ac11461020a578063f77d85ce14610212578063fe7c3f711461022557600080fd5b80630ad32fa1146100fb5780631371cfe114610110578063199fe5bf1461012f5780632421d726146101555780636addb663146101805780636be6026b146101935780637fcd86a8146101a157806380f55605146101b457806398a9c54a146101c7575b600080fd5b61010e6101093660046108d3565b610238565b005b61010e61011e3660046108d3565b600090815260046020526040812055565b61014261013d3660046108ec565b610265565b6040519081526020015b60405180910390f35b600054610168906001600160a01b031681565b6040516001600160a01b03909116815260200161014c565b600254610168906001600160a01b031681565b610142662386f26fc1000081565b6101426101af3660046108d3565b61049a565b600354610168906001600160a01b031681565b61014264e8d4a5100081565b6101426104b8565b6101426402540be40081565b6101426104e7565b6101426104ff565b600154610168906001600160a01b031681565b610142610514565b6101426102203660046108d3565b610529565b6101426102333660046108d3565b610640565b600061024382610640565b6000928352600460209081526040808520929092556005905290912042905550565b60008054604051631fd73a1760e11b81526080840135600482018190529183916001600160a01b0390911690633fae742e90602401602060405180830381865afa1580156102b7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102db9190610905565b600254600354604051633ec7919360e01b8152600481018690529293506000926104599273__$18943158f75973db0541c3d7c8650b2485$__9263b95970179260a08b01359288926001600160a01b039182169263a7de07cd9290911690633ec791939060240161012060405180830381865afa158015610360573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103849190610972565b604001516040518263ffffffff1660e01b81526004016103a691815260200190565b602060405180830381865afa1580156103c3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103e79190610905565b6040516001600160e01b031960e086901b168152600481019390935260248301919091526044820152606401602060405180830381865af4158015610430573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104549190610905565b610739565b9050600064e8d4a5100086610120013561047286610640565b61047c9190610a06565b6104869084610a2d565b6104909190610a5d565b9695505050505050565b6000610e106104a883610529565b6104b29190610a5d565b92915050565b610e1060646104d06103e8662386f26fc10000610a5d565b6104da9190610a5d565b6104e49190610a5d565b81565b610e106127106104d0662386f26fc100006005610a2d565b60646104da6103e8662386f26fc10000610a5d565b6127106104da662386f26fc100006005610a2d565b600080610535836107ab565b905073__$2fd9b049b395f2393b7444f3bf5e98655a$__637b8d0f0c8260646105676103e8662386f26fc10000610a5d565b6105719190610a5d565b61057b9190610a06565b612710610590662386f26fc100006005610a2d565b61059a9190610a5d565b6105a390610a99565b6127106105b8662386f26fc100006005610a2d565b6105c29190610a5d565b6040516001600160e01b031960e086901b168152600481019390935260248301919091526044820152606401602060405180830381865af415801561060b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061062f9190610905565b6106399082610ab5565b9392505050565b60008181526004602081905260408083205483549151631fd73a1760e11b815292830185905291839161069f916001600160a01b0390911690633fae742e90602401602060405180830381865afa158015610430573d6000803e3d6000fd5b905060006106ac8561049a565b600086815260056020526040812054919250906106cd906104549042610add565b90506000662386f26fc100006106eb68056bc75e2d63100000610739565b6106f59190610a2d565b64e8d4a51000836107068688610a2d565b6107109190610a2d565b61071a9190610a2d565b6107249190610a5d565b61072e9086610ab5565b979650505050505050565b60006001600160ff1b038211156107a75760405162461bcd60e51b815260206004820152602860248201527f53616665436173743a2076616c756520646f65736e27742066697420696e2061604482015267371034b73a191a9b60c11b606482015260840160405180910390fd5b5090565b600080546040516374040ff760e01b81526004810184905282916001600160a01b0316906374040ff790602401602060405180830381865afa1580156107f5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108199190610905565b90506108296402540be400610739565b600354604051633ec7919360e01b815260048101869052662386f26fc10000916402540be4009185916001600160a01b031690633ec791939060240161012060405180830381865afa158015610883573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108a79190610972565b60e001516108b59190610a2d565b6108bf9190610a5d565b6108c99190610a2d565b6106399190610a5d565b6000602082840312156108e557600080fd5b5035919050565b600061014082840312156108ff57600080fd5b50919050565b60006020828403121561091757600080fd5b5051919050565b604051610120810167ffffffffffffffff8111828210171561095057634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b038116811461096d57600080fd5b919050565b6000610120828403121561098557600080fd5b61098d61091e565b825181526020830151602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101006109e5818501610956565b908201529392505050565b634e487b7160e01b600052601160045260246000fd5b8181036000831280158383131683831282161715610a2657610a266109f0565b5092915050565b80820260008212600160ff1b84141615610a4957610a496109f0565b81810583148215176104b2576104b26109f0565b600082610a7a57634e487b7160e01b600052601260045260246000fd5b600160ff1b821460001984141615610a9457610a946109f0565b500590565b6000600160ff1b8201610aae57610aae6109f0565b5060000390565b8082018281126000831280158216821582161715610ad557610ad56109f0565b505092915050565b818103818111156104b2576104b26109f056fea264697066735822122070957367342f57cf362cdefb6737c1cdfcc1e9d5d13a02f10a68bdff76ec19cc64736f6c63430008120033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100f65760003560e01c80639cc820da116100925780639cc820da146101d3578063af55f45c14610193578063b29123e9146101db578063bb57703d146101e7578063e6088a7a146101ef578063e76c01e4146101f7578063f5545ac11461020a578063f77d85ce14610212578063fe7c3f711461022557600080fd5b80630ad32fa1146100fb5780631371cfe114610110578063199fe5bf1461012f5780632421d726146101555780636addb663146101805780636be6026b146101935780637fcd86a8146101a157806380f55605146101b457806398a9c54a146101c7575b600080fd5b61010e6101093660046108d3565b610238565b005b61010e61011e3660046108d3565b600090815260046020526040812055565b61014261013d3660046108ec565b610265565b6040519081526020015b60405180910390f35b600054610168906001600160a01b031681565b6040516001600160a01b03909116815260200161014c565b600254610168906001600160a01b031681565b610142662386f26fc1000081565b6101426101af3660046108d3565b61049a565b600354610168906001600160a01b031681565b61014264e8d4a5100081565b6101426104b8565b6101426402540be40081565b6101426104e7565b6101426104ff565b600154610168906001600160a01b031681565b610142610514565b6101426102203660046108d3565b610529565b6101426102333660046108d3565b610640565b600061024382610640565b6000928352600460209081526040808520929092556005905290912042905550565b60008054604051631fd73a1760e11b81526080840135600482018190529183916001600160a01b0390911690633fae742e90602401602060405180830381865afa1580156102b7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102db9190610905565b600254600354604051633ec7919360e01b8152600481018690529293506000926104599273__$18943158f75973db0541c3d7c8650b2485$__9263b95970179260a08b01359288926001600160a01b039182169263a7de07cd9290911690633ec791939060240161012060405180830381865afa158015610360573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103849190610972565b604001516040518263ffffffff1660e01b81526004016103a691815260200190565b602060405180830381865afa1580156103c3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103e79190610905565b6040516001600160e01b031960e086901b168152600481019390935260248301919091526044820152606401602060405180830381865af4158015610430573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104549190610905565b610739565b9050600064e8d4a5100086610120013561047286610640565b61047c9190610a06565b6104869084610a2d565b6104909190610a5d565b9695505050505050565b6000610e106104a883610529565b6104b29190610a5d565b92915050565b610e1060646104d06103e8662386f26fc10000610a5d565b6104da9190610a5d565b6104e49190610a5d565b81565b610e106127106104d0662386f26fc100006005610a2d565b60646104da6103e8662386f26fc10000610a5d565b6127106104da662386f26fc100006005610a2d565b600080610535836107ab565b905073__$2fd9b049b395f2393b7444f3bf5e98655a$__637b8d0f0c8260646105676103e8662386f26fc10000610a5d565b6105719190610a5d565b61057b9190610a06565b612710610590662386f26fc100006005610a2d565b61059a9190610a5d565b6105a390610a99565b6127106105b8662386f26fc100006005610a2d565b6105c29190610a5d565b6040516001600160e01b031960e086901b168152600481019390935260248301919091526044820152606401602060405180830381865af415801561060b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061062f9190610905565b6106399082610ab5565b9392505050565b60008181526004602081905260408083205483549151631fd73a1760e11b815292830185905291839161069f916001600160a01b0390911690633fae742e90602401602060405180830381865afa158015610430573d6000803e3d6000fd5b905060006106ac8561049a565b600086815260056020526040812054919250906106cd906104549042610add565b90506000662386f26fc100006106eb68056bc75e2d63100000610739565b6106f59190610a2d565b64e8d4a51000836107068688610a2d565b6107109190610a2d565b61071a9190610a2d565b6107249190610a5d565b61072e9086610ab5565b979650505050505050565b60006001600160ff1b038211156107a75760405162461bcd60e51b815260206004820152602860248201527f53616665436173743a2076616c756520646f65736e27742066697420696e2061604482015267371034b73a191a9b60c11b606482015260840160405180910390fd5b5090565b600080546040516374040ff760e01b81526004810184905282916001600160a01b0316906374040ff790602401602060405180830381865afa1580156107f5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108199190610905565b90506108296402540be400610739565b600354604051633ec7919360e01b815260048101869052662386f26fc10000916402540be4009185916001600160a01b031690633ec791939060240161012060405180830381865afa158015610883573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108a79190610972565b60e001516108b59190610a2d565b6108bf9190610a5d565b6108c99190610a2d565b6106399190610a5d565b6000602082840312156108e557600080fd5b5035919050565b600061014082840312156108ff57600080fd5b50919050565b60006020828403121561091757600080fd5b5051919050565b604051610120810167ffffffffffffffff8111828210171561095057634e487b7160e01b600052604160045260246000fd5b60405290565b80516001600160a01b038116811461096d57600080fd5b919050565b6000610120828403121561098557600080fd5b61098d61091e565b825181526020830151602082015260408301516040820152606083015160608201526080830151608082015260a083015160a082015260c083015160c082015260e083015160e08201526101006109e5818501610956565b908201529392505050565b634e487b7160e01b600052601160045260246000fd5b8181036000831280158383131683831282161715610a2657610a266109f0565b5092915050565b80820260008212600160ff1b84141615610a4957610a496109f0565b81810583148215176104b2576104b26109f0565b600082610a7a57634e487b7160e01b600052601260045260246000fd5b600160ff1b821460001984141615610a9457610a946109f0565b500590565b6000600160ff1b8201610aae57610aae6109f0565b5060000390565b8082018281126000831280158216821582161715610ad557610ad56109f0565b505092915050565b818103818111156104b2576104b26109f056fea264697066735822122070957367342f57cf362cdefb6737c1cdfcc1e9d5d13a02f10a68bdff76ec19cc64736f6c63430008120033",
  "linkReferences": {
    "contracts/order/OrderUtils.sol": {
      "OrderUtils": [
        {
          "length": 20,
          "start": 1026
        }
      ]
    },
    "contracts/utils/MathUtils.sol": {
      "MathUtils": [
        {
          "length": 20,
          "start": 1594
        }
      ]
    }
  },
  "deployedLinkReferences": {
    "contracts/order/OrderUtils.sol": {
      "OrderUtils": [
        {
          "length": 20,
          "start": 769
        }
      ]
    },
    "contracts/utils/MathUtils.sol": {
      "MathUtils": [
        {
          "length": 20,
          "start": 1337
        }
      ]
    }
  }
}
